<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Rock-Paper-Scissors</title>
    <meta name="description" content="Rock-Paper-Scissors">
    <meta name="author" content="AlexKAryasov">

    <link rel="stylesheet" href="css/styles.css?v=1.0">

</head>

<body>
    <div id="game-container">
        <button id="rock">Rock</button>
        <button id="paper">Paper</button>
        <button id="scissors">Scissors</button>
        <div id="player-score"></div>
        <div id="computer-score"></div>
    </div>
    <script>

        let playArray = ["rock", "paper", "scissors"]
        let computerPlay = playArray => playArray[Math.floor(Math.random() * playArray.length)]
        let playerScore = 0
        let computerScore = 0

        function playRound(e) {
            let result
            let computerDecision = computerPlay(playArray)
            userDecision = e.target.id
            if (userDecision === "rock") {
                if (computerDecision === "paper") {
                    result = "You lost! Paper beats rock!"
                    computerScore++
                } else if (computerDecision === "scissors") {
                    result = "You won! Rock beats scissors"
                    playerScore++
                } else {
                    result = "It's a draw"
                }
            } else if (userDecision === "paper") {
                if (computerDecision === "scissors") {
                    result = "You lost! scissors beats paper!"
                    computerScore++
                } else if (computerDecision === "rock") {
                    result = "You won! Paper beats rock"
                    playerScore++
                } else {
                    result = "It's a draw"
                }
            } else if (userDecision === "scissors") {
                if (computerDecision === "rock") {
                    result = "You lost! rock beats scissors!"
                    computerScore++
                } else if (computerDecision === "paper") {
                    result = "You won! scissors beats paper"
                    playerScore++
                } else {
                    result = "It's a draw"
                }
            } else {
                result = "Please, write rock, paper or scissors!"
            }

            let container = document.querySelector('#game-container')
            let para = document.createElement('p')
            para.textContent = result
            container.appendChild(para)

            let playerScoreDiv = document.querySelector("#player-score")
            playerScoreDiv.textContent = `Your score: ${playerScore}`

            let computerScoreDiv = document.querySelector("#computer-score")
            computerScoreDiv.textContent = `Your opponent's score: ${computerScore}`


            if (playerScore === 5 || computerScore === 5) {
                let gameResultPara = document.createElement('p') 
                gameResultPara.textContent = (playerScore === 5) ? "Congrats, you won!" : "Better luck next time"
                container.appendChild(gameResultPara)
                playerScore = 0
                computerScore = 0
            }
        }

        let buttons = document.querySelectorAll('button');
        buttons.forEach(button => {
            console.log(button)
            button.addEventListener('click', playRound)
        })
    </script>
</body>

</html>